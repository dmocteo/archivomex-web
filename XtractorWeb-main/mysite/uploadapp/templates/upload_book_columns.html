{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}
    <h2>Segmentación por Columnas</h2>

    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <div class="container-fluid d-flex justify-content-center">
        <div class="row mt-5 d-flex justify-content-around">
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-body pt-0 px-0">
                        <br>
                        <div class="d-flex flex-row justify-content-center mb-0">
                            <h5 class="mt-1">Segmentación por Columnas</h5>
                        </div>
                        <hr class="mt-2 mx-3">
                        <div class="d-flex flex-row justify-content-center px-3 pb-4">
                            <div class="d-flex flex-column">
                                <label class="text-muted">Ingresa el índice de las columnas (separado por coma) que correspondan correctamente.</label>
                            </div>
                        </div>
                        <div class="d-flex flex-row justify-content-center px-3 pb-4">
                            <div class="d-flex flex-column">
                                <form method="post">
                                    {% csrf_token %}
                                    {{ form1|crispy }}
                                    <button type="submit" class="btn btn-primary" name="columns_csv">Continuar</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="card-body pt-0 px-0">
                        <br>
                        <hr class="mt-2 mx-3">
                        <div class="d-flex flex-row justify-content-center px-3 pb-4">
                            <div class="d-flex flex-column">
                                <label class="text-muted">Si no aparecieron los índices correspondientes, modifica la sensibilidad a un valor menor.</label>
                            </div>
                        </div>
                        <div class="d-flex flex-row justify-content-center px-3 pb-4">
                            <div class="d-flex flex-column">
                                <form method="post">
                                    {% csrf_token %}
                                    {{ form2|crispy }}
                                    <button type="submit" class="btn btn-primary" name="sensitivity_change">Volver a Procesar</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-8">
                <div class="card">
                    <div class="card-body pt-0 px-0">
                        <br>
                        <div class="d-flex flex-row justify-content-center mb-0">
                            <h5 class="mt-1">Resultado</h5>
                        </div>
                        <hr class="mt-2 mx-3">
                        <div class="d-flex flex-row justify-content-center px-3 pb-2">
                            <div class="d-flex flex-column" style="width:100%;">
                                <img src="data:image/png;base64, {{src}}"></img>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

{% endblock %}
